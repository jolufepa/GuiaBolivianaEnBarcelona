<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="pAmLLPOz-Q6RKC-35KuONA7EW4wPejONJohAZFNr8Ug" />

    <title>Bolivianos en Barcelona - Gu칤a Oficial</title>

    <base href="/" />

    <link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css" />
    <link rel="stylesheet" href="/css/app.css" />
    <link rel="icon" type="image/png" href="/Boli.png" />
    <link href="/BolivianosEnBarcelona.styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="manifest.json" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="Boli.png" />

    <meta name="description" content="Encuentra restaurantes, abogados, env칤os y servicios de la comunidad boliviana en Barcelona. La gu칤a m치s completa para residentes y reci칠n llegados." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="游游 Gu칤a de Bolivianos en Barcelona" />
    <meta property="og:description" content="쮹uscas salte침as, tr치mites o ayuda? Entra al directorio oficial de nuestra comunidad en Catalu침a." />
    <meta property="og:image" content="/Images/portada.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Bolivianos en Barcelona" />
    <meta name="twitter:description" content="El directorio de negocios y servicios para la comunidad boliviana." />
    <meta name="twitter:image" content="/Images/portada.jpg" />



    <script>
        (function () {
            // Script de carga diferida de videos
            function findLoadBtn(node) {
                if (!node) return null;
                if (node.nodeType === Node.TEXT_NODE) node = node.parentElement;
                while (node) {
                    if (node.nodeType === Node.ELEMENT_NODE && node.classList && node.classList.contains('load-video-btn')) {
                        return node;
                    }
                    node = node.parentElement;
                }
                return null;
            }

            document.addEventListener('click', function (e) {
                try {
                    var btn = findLoadBtn(e.target);
                    if (!btn) return;

                    var targetSelector = btn.getAttribute('data-bs-target') || (btn.dataset && btn.dataset.bsTarget);
                    if (!targetSelector) return;

                    var container = document.querySelector(targetSelector);
                    if (!container) return;

                    var iframe = container.querySelector('iframe.lazy-video[data-src]');
                    if (!iframe) return;

                    if (!iframe.getAttribute('data-loaded')) {
                        var dataSrc = iframe.getAttribute('data-src');
                        if (dataSrc) {
                            iframe.src = dataSrc;
                            iframe.setAttribute('data-loaded', '1');
                        }
                    }
                } catch (ex) {
                    console.warn('Error manejando carga de video:', ex);
                }
            }, false);
        })();
    </script>
</head>

<body>
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">游딏</a>
    </div>

    <script src="/_framework/blazor.webassembly.js" autostart="false"></script>
    <script>
        Blazor.start().then(function () {
            console.log("Blazor iniciado correctamente.");
        }).catch(function (error) {
            console.error("Error cr칤tico iniciando Blazor:", error);
            // Esto mostrar치 el error en pantalla si se queda pegado
            var errorUi = document.getElementById('blazor-error-ui');
            if (errorUi) {
                errorUi.style.display = 'block';
                errorUi.innerText = "Error cargando la aplicaci칩n: " + error;
            }
        });
    </script>
    <script>
        window.obtenerUbicacion = () => {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject("Geolocalizaci칩n no soportada");
                } else {
                    navigator.geolocation.getCurrentPosition(
                        (position) => resolve({ lat: position.coords.latitude, lon: position.coords.longitude }),
                        (error) => reject("Permiso denegado o error")
                    );
                }
            });
        };
    </script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>
</body>

</html>